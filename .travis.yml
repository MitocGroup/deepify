language: node_js
sudo: false
node_js:
  - '4.3'
  - '5.11'
  - '6.2'
cache:
  directories:
    - $(npm root -g)
    - node_modules
    - $(npm config get prefix)/bin
notifications:
  email:
    - devs-deep@mitocgroup.com
  slack:
    secure: Kv3toHMK+/TguJa9jIbIhii/XmLZUDlEX8YiDSJv1S6zKEQqowqXT2Gi1J9u8KYiZBQC+S3x+T9eRkkNJk7RMrLaotbrtI5DNa7ynrhSydIApZIXxISZBh4Ihbdsch7y6ZPDuaGATKSInKY96NRqbXozw9f/pNYc/c2nq3BIBBexLAfGNlQPgVqBNKw12WlfU8O1ARMpQ3fWDE1JgTtLYZst1EGXwkm87O5ybDUcEUY+qqwj6I5HYSpCjanZ3ILeYagrb79gbgU6llusI6YF4PKVH12+51O0xqpvqawxqcLWbKwv7Y1H8kUBI0vKSPlvLS9dsqwnjG8BpHse2ypSzqfuMyViETmpP+ZHFJ8avxrGsPdiQe4doqiYBz2dkxRyorx4QTI/5JP/CGIp9k7NCsd3KQGViHvWOqMnYyBzkd8bTvYNbJYQ72xOYrgAhsiqEJaCOUk4x8h4pSUBb/r021XK3uIU9hu1GXdLg5o57pFk3XNFzD9pUBsQi6TZLYwH8GFGcJEUbDEYA8Gev5E/ZDRz3IheFL7oIWZbssT8I3uXojMMMQvBf4masC8MmYhc8IQh3LCS8h78Sw07sFEhcjXMcNCxeM+B5lkoByiLBMuI2Jwvfo/C2ulqitwo4niqju45bh/rsdUlJEJZwTrDkpj0imjDHQPxhSo9Ftrqk68=
branches:
  only:
    - master
    - stage
    - test
    - dev
    - coverage_path_update
env:
  global:
    #CODACY_PROJECT_TOKEN =[secured]
    secure: ctn7KdhoscPoXwpgTk+QRG8rr4f5EcqfcRLuc+8MQiXULOrEqV8o5/G3QvgFmF3boRY1TnOKv6kQJCsQTmiZyIPgxYqhU57X+c/7tusTXPWL58/aGhTCguIbg5qoO0M13MAzLtfXNkySjzSWuO0eqv/3E1D66UBNfmYKW3Bl9XGAJMArgTwH3uCa+u885vvhyAf3B9BR9jvntsfc+2jGTYtI908FU/UWfUmoSpURUllRWyIyy5i35bxFovJCL271HK4gBbTU+vXiARGag4SNPdDv6j62QPiD394T8u8XJPxjO1jZc7pv6wB8bfl7V4ODAYJirM9CT4LMNbQ7CsDZoow0qk+nz+cyH1OWvIAcMHrL1Pbmt8Aptq4jWJCDY//WDM+EP3EZq9p1SML5VFzdBHzITFS4CSxAlEO/1VkWdN1CQrdscSAj7Inn9W2zz25VakDgRPqgiCoiQA4gI8yPWz9pfqBGYsq4KkU2+jOaoFZscRR3nxzBOOWKbV1oW66sRQOveTdut9EfZMIQpbDxI6tKf5Iwfnc99yeYvDepvNPenUlyBQPSU7t2ZlGAOmFLfouPy0VdRSFyHO6CjNnI/q0cvoATEMnKNxlkpvK8gG/en/VhBSSJqCAv2v6HHiixGOEKrnz3qj/dB79Mz7SY0I3+NilR3a/yLcJ6OrD2Goo=
before_install:
  - (npm list -g babel-cli --depth=0 || npm install -g babel-cli@6.x.x)
  - (npm list -g babel-polyfill --depth=0 || npm install -g babel-polyfill)
  - (npm list -g babel-preset-es2015 --depth=0 || npm install -g babel-preset-es2015)
  - (npm list -g babel-plugin-add-module-exports --depth=0 || npm install -g babel-plugin-add-module-exports)
  - (npm list -g browserify --depth=0 || npm install -g browserify@11.2.x)
  - (npm list -g mocha --depth=0 || npm install -g mocha@2.4.x)
  - (npm list -g istanbul@^1.0.0-alpha --depth=0 || npm install -g istanbul@^1.0.0-alpha)
  - (npm list -g codacy-coverage --depth=0 || npm install -g codacy-coverage@1.1.x)
  - cp test/package.json .
after_success:
  - npm run coverage
