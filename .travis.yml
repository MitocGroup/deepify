language: node_js
sudo: required
git:
  depth: 1
cache:
  bundler: true
  directories:
    - node_modules
    - "$(npm root -g)"
    - "$(npm config get prefix)/bin"
branches:
  only:
    - master
    - stage
    - test
    - dev
env:
  global:
    - DEEP_NO_INTERACTION=1
    # AWS_ACCOUNT_ID=[secure]
    - secure: "bAcreA4niruZka4zvaNCdN9K8LdQx2N7G2qsJ/coQnp9tOdNTeU5DcZ1h42sRFY9nXY3rJEuHbXGGeBaHkxaVUpulmV8md1vMVh1u3MF77rjXkVPEgUpmDSxB8L7ld5vXoElvqhjZJd1onRMBbJHhgP1xDPJ2F/X6V6PNI0OkBq5gzhI0uaho9kFcCYbV4086DilD/FjCdHzmmxEVXVi6z3osFlKjL0aoeptnZmUqhdNnAP9h43ld/9AcWlkHjoq/zSAFT/+0wiELx9M8GKUetiJSIrNzXP9TObA56FcGgqjx115bSz+ZBWv+F5+PLATOdWwK47go8aLP/HdW3Qc3AP986BN1IwJ9tzTTx+5Ft3M4DuWrRqlTf1U8JnT7f/VGtdIEUj/6Y64/xi+jkq3R8AkTGH5v3eA5i6GqKpiHFIMm4Hq3UIntrDoi3V/tsJi62M+bY9v1l7snNOHTdMml8MifBGLxIsjy1yJwMgrRJ+YFDpz3U/CjUfdUooE9c3BYiiD+b70QWkB7QYvj1/j29UaEw4ZtzscP2IRvpDSD4LcvzSNAX80oMURcUfp5Yo/hDi65bTs7siGLPE5az4zIqCk3RcO1K8oX50uLE0AEEb1MNMTD1Sl7NrpqQQTZxp4jeuiesTigjmx7Ov1pN/VMrFUfOvgtSG+oEcucIAYOZM="
    # AWS_ACCESS_KEY_ID=[secure]
    - secure: "J60p6qxOBF1drN9gSUGwNuC2Z/89i8GQyDrTMTtDJ6KpxmhjeLtD8WAVkxg1YoDu04ZsCx3s6ABXhM5W+pyZMkZhGT1ICz//xl89hy2K5PVgE8XnvRgZFwz+BEj2PoMivKXjv6W/weTsbNluG6eWrysZJETHM3aQDKWY3h31W80hT3h3G3lR6fRoljKmKWRy5/6CouWpqDworF+X9kn/n7v9mUbyB3quZWbpR+64hyteqmShUxqgFFmFuFw0DgPt2bjhfe3adGUwGZDQBzf0CNA1RfW7+zyZsxUdKaOIAoHpQWTitMZq76XiH6NjX0kp1uocTBaWF4Dtu+uxqG0BmUDXbVjYXXKfgvOCq0+zm5j7riNleLSYj0rTjp8Pa6k5wZ61TNItHv7urtbN//GfuyB/Y0aXIFlzocIrAWAJx3IBnf197F5riCxPcZlhswfc0D8qgxXkN5+Ojb0lj+VK7YMkUeiUKXaEnep5frDSrBN6fDgWpeqdg0ZPjerjRe/e2k7GFO7hsvjC6SOEUIXyfFXpQ27x6blHOMW8WdZrEizTsjN10iz/pQwrmMfezNlITT/37CQHJDdIZT/qpCIIKvbCKXYLQKYwg/MJijcO1Ts0vNUMwp8JospDWgLjZcmv5vxNupZ7uJTldIZSYMWMd5ylp7yA0S+dzJsoM7tJ0d8="
    # AWS_SECRET_ACCESS_KEY=[secure]
    - secure: "UbCblqLbOe75q/28R/1ebluWQMbOitkCtHj0axWAT+4+CjiEqV1NuQsMPUumv4VYHt2SMk7Zzfg7/WkZvTRD7rTtaIjGQw9RpW2Qig5/qHOoxki+geEyQo2wC0qzQ3++WduGorS6SiyFvoQSUz77HbI6hUq8+tMwSgFHnQP2Zx2Hf0h2NbhrBdCSVu1LXi+K40BunbJpx2vAlONbh99QPwXu6uQlAx8RknHy/xQrIkznupOlm/b99lZ0prkc6SzVZfeAX1nX+cFSBVQ254eaF+43ag6R1rMZuMQHCMOeHA4KM9bLJ4J47/wR/hcoI7nj0Sotw0PoaTP7qovT4HErhIjPTUpp/Wj6MhgH0ESGCl39l3fG4PxpilzCwmRuWf6nfIpqj7KSnlE4iho1/lQrgUI9wBKs014p4owfSNOm6CJIpMyX2K4rmVI4hpcMPTB+8u9TyuE09gay+3lO6uuMuABmhqmrMMhcLAQbNDLQ1JzgPLNK8vzkGSOjYtW4EyzJaMl5OlaVTHtIbLShab6gf84CjcN2KBJQjEkUwH19uTqNACPXqBcLoC8gI8+3UAeTCU03KoQDpjziofRdXU6aQiMQtDJKPDGlnIh+HXZGjFnfmgo/v97lqT8IhnNmWBLbFnXL7mYzDlB+4Q18GI4O5LafU7HogmdaXjYStSSvugo="
    # AWS_DEFAULT_REGION=[secure]
    - secure: "bQfoWN+Ed4oBUocPJZHKm49H03nmLnzG7HBKgiGsiP+EPCdp/xWfyRvrpb5N633z6sembpb/AB0al1VyhD6bMwmI5Ytqmw4Tunps+Q5g3J3QSQtF/ERgdOCc493LqYSwASrVN7ZgOZSy1kkLwszm7m1BhE+9nchyaID5bwNq9cPJFrdUx8KAt7z2MZbWz8x+SdXW1vYsejTIqrhN9b9o4YGEXKECEK8JNDXz/h5AIF9YABujf3j7V8S8XfHbi0xyYgEVcQOC1cSvOzzZY97YN2ZkyDarC/25G9vHRKA9UwDE08Ja05Miya5tnKsYt+xhf8iDjqIAKaFGOgthMD2DKRe37hPw7szv0zhNZW3UxYNXVhALq4v/LREPBqN3CoxdphIg8v2/84QmN8QiK+v2FrXlg3IdtfGf0JQDwldNswWFCW5Lbjpq11wWFiTpsy8N2llvu7TPbk3fJzhuLj0pxHLYS7E6r3DEVqgMrJL/floO/Ila4fnABMEFUIV9skp2qoMs8RknXT+exXinsuP5vr6pI8T3iwLQPW6xSkdcMhgVA1bF/hkBcwItYYGLSQg/XGLZ5EtiedZfAx9KqgeFKhCQGotbr5xxv8hw3AtOMnq+K+tOBc45pHvGiMY/zMn4dLS+VvJ+hY4UL+iGpwkMfyKFY/60vCh4F/ETbWAmXUY="
    # CODECLIMATE_REPO_TOKEN=[secure]
    - secure: "bR5bPWS7JhVStoOD78XAMv+eXowVke5RsC97H53SKHqsDhEVMO2hOiOfur/TSP3gPY4DJ6UJbwNzm0/mO3Il1kDcul88c++uDVm9dk3PvY1IaYoIKwOLmAroHDoF6hO09MaSkDubkZxLPaed4ZLpFc2XeRQf7Nkfl5J79E0xnG9X6ru83WMGz84U/cpznVP+eGi5Wwoby64ERLwF69Tqju7G6bAwqvzrXarLBHp8tLIMLsXy+GDP5bbXjIjynfE+cadRRoPieQbIVTc/1bVDSf/q67NhDBS0lieCTsbp1KwM6J3e6TQyHds9u8OqgcsYH3ELukV2tc5H5xXN4h1WS5A5ughtdCdYsJzksqwyzB2/Xf6TqwfhbuQd6awhDP+QopT/by9H5B8WUJwrWn9FzLz9LEMhtSN2zLCawz6ktFMPrm9+KLrCEHuCtPJUv2dtmC+kgKZBii3P3NX3Qx4n4tle4skEbnU8km1AkW+IjDpZzjaWvdfXarCpYLZHA5PR857lteoEMxYcm9t2MRoh3/8kd4yuGU0Vl1pO3BQjJ7h8KhfzX3Ven6mC10Md4qNJY1Q7WZ2Uy7eGAmDZkdIm7B/fCGlIqzEKQnTwdx77AfH6NA3I3CsmQ+sXI3mySfBjDv7kTgGWQ8uO2ymKk3hanzkzmAVTnB2CErgr/8Gt7CE="
    # SNYK_API_TOKEN=[secure]
    - secure: "kIRVGSsf5bJBjhlQhMtgTjmmlDk12Hh3jW5odbzRfAjGbqXLDbENhyoaO8/E456uMRaLTzkqcWAjhSPUd5U9UlhF8FJx46f/+QD1fNMJVGqzijK92kY2R3NgmLdODaruhm8YKiw7xqi2UKloXBdRWTk8R41E+sqVWFFWJ9aQvpV3FV0FZWkYSLBtJ5nIwS7AxPGLG6A2J7Kmc6ACks1YyfNtzioAbE/kBOpOXK/zLlDUB/Iyb5nLNHaqwNL0yKAc5DPctWTODDkCCQxdkaK6QU4gHU1duqYu1WmSqhf/6IRQGH3rcmchdQrUoLR7dkr0v3kh4afpyuxA1aJx5aTzIdy7rP5lMapDZVFD6pemDyCHLjVn56lil4mfdWTPUz//W9eszSkReH9t8AYxVKyXWxTD94AM5cPHdX536Wo9ehaq6tk6V1hONHDQcgnq2YHlWPLj6e03y/5MXmrqFmtPLiLj9iGYzBSLYZDvniUMY2QltAo3NFKzivhQztB8D8gwNQUaT5ksdGWicD4I7EU9iuSvC+vra0G/xS44rcXDVsSf3XWZDMmOusNOMVf5GrPOhHXJTRB8sF2P5FtAYE+NgCm2Q+6c7uNrGYMjFJp14jaSnfuFbqAZAUwswgC445USEYjbJ+6BsUy6qDKUe5rFOJ89dSVxOt4meF/Tf0WU6cA="

stage: "Run Unit Tests :clipboard:"
node_js:
  - 6
  - 8
before_install:
  - npm install -g recink
  - npm install -g recink-codeclimate
  - npm install -g recink-snyk
script:
  - recink run unit -c recink-codeclimate -c recink-snyk