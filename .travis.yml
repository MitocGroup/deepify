language: node_js
sudo: required
git:
  depth: 1
cache:
  bundler: true
  directories:
    - node_modules
    - "$(npm root -g)"
    - "$(npm config get prefix)/bin"
branches:
  only:
    - master
    - stage
    - test
    - dev
env:
  global:
    - DEEP_NO_INTERACTION=1
    # AWS_ACCOUNT_ID=[secure]
    - secure: "bAcreA4niruZka4zvaNCdN9K8LdQx2N7G2qsJ/coQnp9tOdNTeU5DcZ1h42sRFY9nXY3rJEuHbXGGeBaHkxaVUpulmV8md1vMVh1u3MF77rjXkVPEgUpmDSxB8L7ld5vXoElvqhjZJd1onRMBbJHhgP1xDPJ2F/X6V6PNI0OkBq5gzhI0uaho9kFcCYbV4086DilD/FjCdHzmmxEVXVi6z3osFlKjL0aoeptnZmUqhdNnAP9h43ld/9AcWlkHjoq/zSAFT/+0wiELx9M8GKUetiJSIrNzXP9TObA56FcGgqjx115bSz+ZBWv+F5+PLATOdWwK47go8aLP/HdW3Qc3AP986BN1IwJ9tzTTx+5Ft3M4DuWrRqlTf1U8JnT7f/VGtdIEUj/6Y64/xi+jkq3R8AkTGH5v3eA5i6GqKpiHFIMm4Hq3UIntrDoi3V/tsJi62M+bY9v1l7snNOHTdMml8MifBGLxIsjy1yJwMgrRJ+YFDpz3U/CjUfdUooE9c3BYiiD+b70QWkB7QYvj1/j29UaEw4ZtzscP2IRvpDSD4LcvzSNAX80oMURcUfp5Yo/hDi65bTs7siGLPE5az4zIqCk3RcO1K8oX50uLE0AEEb1MNMTD1Sl7NrpqQQTZxp4jeuiesTigjmx7Ov1pN/VMrFUfOvgtSG+oEcucIAYOZM="
    # AWS_ACCESS_KEY_ID=[secure]
    - secure: "R/efHpXqyL8C7atGgFAzCs1+zilhluqg1zuFObE3ApCPwCnjuSxuz2+S0x8ahJHdWgn+v9YP2en0RjNO6xMiwuGYxPoIbqEmQ0CDkO8r1Qn9eoRbVv28MQCTRU/1ZXjZpccDR3Rg4gEwRBOlhfhULOWsfF/B1qGCS/CIqxp79EGb3SqNOn7HKk+vhGGN+jzOtspDx764ZBvj6mhNk+avWFYucLRmEmB5NtExneZchRoeTaYG7gHejeLgcpDqgrqCndRuvTEmfnyLGDZJE/7S06luxGDZKBw+LEbv82A81p1VjjzfBFJJ2nAMyJtJ3HrlWTBfgJHXkx2OChAuc8GBsBiIwPWef67oki88TQ8P3NsdG/9hk14XChFDBPNornr0mMyhmUIFNTfjS8NIoWFkJiiG2KbyliX+3odSC2cj14m2t2vYKRv166UaFJR+gvaPtYoYSHDd8pWKaFrPFV/n0cl2qhKCaNYHnnLDTwlf4IgwvCQZ2n7n3etJcl6DBbbiKhgQH7PwkeLVakIQz1sXeNzyWJ4GpBsOkjOzDSTPoD5/7gSFuPy6Z8f9zkS36o2ZoxIccypFeTMil/JuF1iH67s3aJSVCmfabHoD5p7teI00bMo+d9Ps3kIMQ7AJEcyQzl1jlvOc1FBE22YSWKnzrUUH7WLle1aCpC7BVoCUPeY="
    # AWS_SECRET_ACCESS_KEY=[secure]
    - secure: "etZSHwE6zecbl3JJRk47OHPZKPv7Kuyxsd39uv5MlLymc8iuRST4vcaj3pcB6H+Qz/KGdbi0LIX/P0uEjLgjZ6BumDsx+MoMP8UAeV3ajrDOV45vyKzOM/maH3NpPwHCf3jy38Bj+b54CNYYHVX+l38sQ6e4gI1Z04o2frKFHayfH/zEAcAmm2nJocQpgzggnW+RXAVwJaCXxnLvgLkkDDSoy5J2mOmVC8PfRpLOIVeC5OISqI8l9paS7uk1g7UQ6OQoSL3Rj62oO5Dc4TannCmxYf2DkqS61roEH8ANmIwAXjk6ML38GWJcqvi8XUB0Cl68dIkJF58Is+MsqjnmdDyrUcLmMmIp3oGXi5RN1BvT7liUDq9lKxGfMSGEKEuijSAUBEiPmRanQHadVzf4gpVvKH5/YDNdbzg2rl7jV/cHjepJDgFTvD5Yu8tbx3OQ3V35PN5k/9/EedlLRqyoFwXmk1RlO2J2tFZxPeeT7HXgFe6TP5oRmbBbB3mRFg8K1FWuzUH+maJ/gw7h+Lus18zjAJxnsEHgZ9zicEgNjEKlSOotttMWiEzIpXnNEcu5+r28Pe6v9PLbWnqBPtJUkncliNhGgEfRTo3nBjdWiDrGlNAL806C94H+YYHkpxDwWO/PX0gc3ZBGvblQEL8pOOEAPjF/TaUPSsIP6nLt7xA="
    # AWS_DEFAULT_REGION=[secure]
    - secure: "bQfoWN+Ed4oBUocPJZHKm49H03nmLnzG7HBKgiGsiP+EPCdp/xWfyRvrpb5N633z6sembpb/AB0al1VyhD6bMwmI5Ytqmw4Tunps+Q5g3J3QSQtF/ERgdOCc493LqYSwASrVN7ZgOZSy1kkLwszm7m1BhE+9nchyaID5bwNq9cPJFrdUx8KAt7z2MZbWz8x+SdXW1vYsejTIqrhN9b9o4YGEXKECEK8JNDXz/h5AIF9YABujf3j7V8S8XfHbi0xyYgEVcQOC1cSvOzzZY97YN2ZkyDarC/25G9vHRKA9UwDE08Ja05Miya5tnKsYt+xhf8iDjqIAKaFGOgthMD2DKRe37hPw7szv0zhNZW3UxYNXVhALq4v/LREPBqN3CoxdphIg8v2/84QmN8QiK+v2FrXlg3IdtfGf0JQDwldNswWFCW5Lbjpq11wWFiTpsy8N2llvu7TPbk3fJzhuLj0pxHLYS7E6r3DEVqgMrJL/floO/Ila4fnABMEFUIV9skp2qoMs8RknXT+exXinsuP5vr6pI8T3iwLQPW6xSkdcMhgVA1bF/hkBcwItYYGLSQg/XGLZ5EtiedZfAx9KqgeFKhCQGotbr5xxv8hw3AtOMnq+K+tOBc45pHvGiMY/zMn4dLS+VvJ+hY4UL+iGpwkMfyKFY/60vCh4F/ETbWAmXUY="
    # CODECLIMATE_REPO_TOKEN=[secure]
    - secure: "bR5bPWS7JhVStoOD78XAMv+eXowVke5RsC97H53SKHqsDhEVMO2hOiOfur/TSP3gPY4DJ6UJbwNzm0/mO3Il1kDcul88c++uDVm9dk3PvY1IaYoIKwOLmAroHDoF6hO09MaSkDubkZxLPaed4ZLpFc2XeRQf7Nkfl5J79E0xnG9X6ru83WMGz84U/cpznVP+eGi5Wwoby64ERLwF69Tqju7G6bAwqvzrXarLBHp8tLIMLsXy+GDP5bbXjIjynfE+cadRRoPieQbIVTc/1bVDSf/q67NhDBS0lieCTsbp1KwM6J3e6TQyHds9u8OqgcsYH3ELukV2tc5H5xXN4h1WS5A5ughtdCdYsJzksqwyzB2/Xf6TqwfhbuQd6awhDP+QopT/by9H5B8WUJwrWn9FzLz9LEMhtSN2zLCawz6ktFMPrm9+KLrCEHuCtPJUv2dtmC+kgKZBii3P3NX3Qx4n4tle4skEbnU8km1AkW+IjDpZzjaWvdfXarCpYLZHA5PR857lteoEMxYcm9t2MRoh3/8kd4yuGU0Vl1pO3BQjJ7h8KhfzX3Ven6mC10Md4qNJY1Q7WZ2Uy7eGAmDZkdIm7B/fCGlIqzEKQnTwdx77AfH6NA3I3CsmQ+sXI3mySfBjDv7kTgGWQ8uO2ymKk3hanzkzmAVTnB2CErgr/8Gt7CE="
    # SNYK_API_TOKEN=[secure]
    - secure: "kIRVGSsf5bJBjhlQhMtgTjmmlDk12Hh3jW5odbzRfAjGbqXLDbENhyoaO8/E456uMRaLTzkqcWAjhSPUd5U9UlhF8FJx46f/+QD1fNMJVGqzijK92kY2R3NgmLdODaruhm8YKiw7xqi2UKloXBdRWTk8R41E+sqVWFFWJ9aQvpV3FV0FZWkYSLBtJ5nIwS7AxPGLG6A2J7Kmc6ACks1YyfNtzioAbE/kBOpOXK/zLlDUB/Iyb5nLNHaqwNL0yKAc5DPctWTODDkCCQxdkaK6QU4gHU1duqYu1WmSqhf/6IRQGH3rcmchdQrUoLR7dkr0v3kh4afpyuxA1aJx5aTzIdy7rP5lMapDZVFD6pemDyCHLjVn56lil4mfdWTPUz//W9eszSkReH9t8AYxVKyXWxTD94AM5cPHdX536Wo9ehaq6tk6V1hONHDQcgnq2YHlWPLj6e03y/5MXmrqFmtPLiLj9iGYzBSLYZDvniUMY2QltAo3NFKzivhQztB8D8gwNQUaT5ksdGWicD4I7EU9iuSvC+vra0G/xS44rcXDVsSf3XWZDMmOusNOMVf5GrPOhHXJTRB8sF2P5FtAYE+NgCm2Q+6c7uNrGYMjFJp14jaSnfuFbqAZAUwswgC445USEYjbJ+6BsUy6qDKUe5rFOJ89dSVxOt4meF/Tf0WU6cA="

stage: "Run Unit Tests :clipboard:"
node_js:
  - 6
  - 8
before_install:
  - npm install -g recink
  - npm install -g recink-codeclimate
  - npm install -g recink-snyk
script:
  - recink run unit -c recink-codeclimate -c recink-snyk